{% load static %}
<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <title>Search Buses | BusBuddy</title>
  <link rel="stylesheet" href="{% static 'main/style.css' %}">
</head>
<body>
  <header class="site-header">
    <div class="container">
      <h1>Find Your Bus</h1>
    </div>
  </header>

  <main class="search-page container">
    <form method="get" action="{% url 'search_buses' %}" class="bus-search-form">
      {{ form.as_p }}
      <button type="submit" class="btn primary">Search</button>
    </form>

    {% if buses %}
      <h2>Available Buses</h2>
      <ul class="bus-list">
        {% for bus in buses %}
          <li class="bus-card">
            <strong>{{ bus.name }}</strong>  
            ({{ bus.bus_type }} - {{ bus.sleeper_type }})  
            ₹{{ bus.price }}  
            <br>
            {{ bus.route.source }} → {{ bus.route.destination }}
            <br>
            {{ bus.departure_time }} → {{ bus.arrival_time }}
            {% if form.cleaned_data.is_woman %}
              <span class="badge safe">Women-Safe Option</span>
            {% endif %}
          </li>
        {% empty %}
          <p>No buses found for this route.</p>
        {% endfor %}
      </ul>
    {% endif %}
  </main>
</body>
</html>
