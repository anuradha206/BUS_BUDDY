{% extends "main/base.html" %}
{% block content %}

<h2>Conductor Dashboard</h2>

<p>Here are your buses and schedules.</p>

{% if buses %}
    {% for bus_data in buses %}
        <div style="padding:10px;border:1px solid #ccc;margin-bottom:20px;">
            <h3>{{ bus_data.bus.bus_name }}</h3>
            <p>Registration: {{ bus_data.bus.registration_number }}</p>
            <p>Total seats: {{ bus_data.bus.total_seats }}</p>
            <p>AC Type: {{ bus_data.bus.ac_type }}</p>
            <p>Bus Type: {{ bus_data.bus.bus_type }}</p>

            <h4>Schedules</h4>
            {% if bus_data.schedules %}
                <ul>
                    {% for schedule in bus_data.schedules %}
                        <li>
                            <strong>{{ schedule.route.start }} â†’ {{ schedule.route.end }}</strong><br>
                            Time: {{ schedule.time }}<br>
                            Available seats: {{ schedule.available }}<br>
                            Days: {{ schedule.raw_schedule.days }}<br>
                            <a href="{% url 'start_booking' schedule.id %}">View Bookings</a>
                        </li>
                    {% endfor %}
                </ul>
            {% else %}
                <p>No schedules available for this bus.</p>
            {% endif %}
        </div>
    {% endfor %}
{% else %}
    <p>You have not registered any buses yet.</p>
{% endif %}

<a href="{% url 'register_bus' %}" class="btn primary">Register a new bus</a>

{% endblock %}